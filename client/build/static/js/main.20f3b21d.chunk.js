(this["webpackJsonpazure-mern-client"]=this["webpackJsonpazure-mern-client"]||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(12),o=n.n(r),c=(n(78),n(87)),i=n(88),s=n(98),d=n(97),u=n(89),h=n(48),p=n(92),j=n.n(p),b=n(216),f=n(204),g=n(220),v=n(223),m=n(218),O=n(219),y=n(221),x=n(222),w=n(207),S=n(234),_=n(231),M=n(230),D=n(215),k=n(210),C=n(211),J=n(209),R=(n(148),n(232)),z=n(233),T=n(214),A=n(225),F=n(224),E=n(96),N=n(229),I=n(6),W=n(140).Calendar,P=(new W,Object(E.a)({spacing:0,padding:0,palette:{primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#dcf5fd",dark:"#ba000d",contrastText:"#000"}}})),B=Object(f.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},table:{minWidth:650},TableCellSizeSmall:{padding:"3px 1px 3px 1px",fontsize:"0.875rem",textalign:"left",fontweight:400,lineheight:1.43,borderbottom:"1px solid rgba(224, 224, 224, 1)",letterspacing:"0.01071em",verticalalign:"inherit"}}})),L={SCM:"#C2F3E4","":"#eddbf9",Marketing:"#FF9F66",other:"#DCF5FD"},V="/api/data",U=2021,H=null;function K(e){var t=e.obj,n=(e.change,l.a.useState(!1)),a=Object(h.a)(n,2),r=a[0],o=a[1],c=l.a.useState(!1),i=Object(h.a)(c,2),s=i[0],d=i[1],p=l.a.useRef(""),j=l.a.useRef(0),f=l.a.useRef(""),g=l.a.useRef(new Date),v=l.a.useRef("-"),m=l.a.useRef("2022-01-01"),O=l.a.useRef("-"),y=l.a.useRef("-"),x=t,w=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("------------- Soll ge\xe4ndert werden? "+(null!=a?"Ja":"Nein")),n=parseInt(n),g.current=new Date(e,t,n);var l=""+e,r=t<10?"0"+t:""+t,c=n<10?"0"+n:""+n;m.current=l+"-"+r+"-"+c,j.current=null!==a?a._id:0,O.current=null!==a?a.desc:"",y.current=null!==a?a.type:"",v.current=null!==a?a.type:"",console.log("DAtum geparsed: "+l+"-"+r+"-"+c+" type: "+v.current),d(null!==a),o(!0)};w;var S=function(){o(!1)},R=function(e){return o(!1),console.log("dialog hat jetzt: "+v.current),function(e,t,n,a,l){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return console.log("Jetzt ist isUpdate noch: "+o),new Promise((function(c,i){var s={desc:e.current.value,desc_long:t.current.value,date:n.current.value,type:a};o&&(console.log("--- hier hab ich noch die ID: "+r),s={_id:r,desc:e.current.value,desc_long:t.current.value,date:n.current.value,type:a});var d=o?"POST":"PUT";fetch("".concat(V,"/hero"),{method:d,body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=l,n=!!o;console.log("an checkpoint 2 ist es nun: "+n);Object(u.a)({},s);console.log("DB Eintrag erfolgt, ID: "+e.ops),t(e.ops[0],n)})).catch((function(e){i(e)}))}))}(p,f,g,v.current,x,j.current,e)};return H=w,Object(I.jsx)("div",{children:Object(I.jsxs)(M.a,{open:r,onClose:S,"aria-labelledby":"form-dialog-title",children:[Object(I.jsxs)(J.a,{id:"form-dialog-title",children:["Termin ",s?"\xc4ndern":"Eintragen"]}),Object(I.jsxs)(k.a,{children:[Object(I.jsx)(C.a,{children:"Termin bearbeiten."}),Object(I.jsx)(_.a,{id:"date",label:"Datum",type:"date",defaultValue:m.current,inputRef:g,InputLabelProps:{shrink:!0}}),Object(I.jsx)(_.a,{autoFocus:!0,margin:"dense",defaultValue:O.current,id:"desc",label:"Beschreibung",inputRef:p,type:"text",fullWidth:!0}),Object(I.jsx)(Y,{callback:function(e){console.log("bekomme in setTypeVal: "+e),v.current=e},defaultType:y.current})]}),Object(I.jsxs)(D.a,{children:[Object(I.jsx)(b.a,{onClick:S,color:"primary",children:"Cancel"}),Object(I.jsx)(b.a,{onClick:function(){R(s)},color:"primary",children:s?"\xc4ndern":"Eintragen"})]})]})})}function Y(e){var t=e.callback,n=e.defaultType,a=B(),r=l.a.useState(null!==n?n:""),o=Object(h.a)(r,2),c=o[0],i=o[1];console.log("Simple Select aufgerufen: "+n);return Object(I.jsxs)(T.a,{variant:"filled",className:a.formControl,inputRef:c,children:[Object(I.jsx)(R.a,{id:"demo-simple-select-filled-label",children:"Typ"}),Object(I.jsxs)(A.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:c,onChange:function(e){i(e.target.value),console.log("setze jetzt auf:"+e.target.value),t(e.target.value)},children:[Object(I.jsx)(z.a,{value:"",children:Object(I.jsx)("em",{children:"None"})}),Object(I.jsx)(z.a,{value:"Marketing",children:"Marketing"}),Object(I.jsx)(z.a,{value:"SCM",children:"SCM"}),Object(I.jsx)(z.a,{value:"Other",children:"Other"})]})]})}function $(e,t,n,a,l,r){var o,c,i,s=[],d=B(),u=new Date,h=u.getMonth(),p=t-1,j={year:u.getFullYear(),month:h,day:u.getDate()},b={year:n,month:p,day:parseInt(e)},f=W.diff(b,j),g=0==f;if(null!=a)for(var v=function(){y=a[O]._id;var r=a[O],o=L[a[O].type];s.push(function(e,t,n){return n?Object(I.jsxs)(F.a,{badgeContent:t,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"left"},children:[" ",e," "]}):e}(Object(I.jsx)(S.a,{p:0,style:{backgroundColor:o},size:"small",label:a[O].desc,onClick:function(a){var l=r;H(n,t,e,l),console.log("richtig mit: "+l._id),a.stopPropagation()},onDelete:function(){return l(y)}}),f,0==O))},O=0;O<a.length;O++){var y;v()}return[Object(I.jsx)(m.a,{className:d.TableCellSizeSmall,style:q(e,!1,g),p:0,align:"left",onClick:function(){H(n,t,e)},children:e}),Object(I.jsxs)(m.a,{className:d.TableCellSizeSmall,style:q(e,!0,g),p:0,align:"right",onClick:function(){console.log("H\xe4\xe4\xe4\xe4\xe4hhhh"),H(n,t,e)},children:[Object(I.jsxs)("div",{style:{whiteSpace:"nowrap",align:"right"},children:["  ",s,"    ",(o=W.calculateWeekNumber({year:n,month:p,day:parseInt(e)}),c="",i=e.includes("Mo"),i?Object(I.jsxs)("div",{style:{display:"inline-block",height:"100%",fontSize:"90%",color:"black",fontStyle:"bold",borderRadius:"0px",borderRight:"1px solid lightgrey"},children:[Object(I.jsx)("div",{style:{alignContent:"center",fontSize:"50%"},children:"KW"}),c+""+o]}):c)]})," "]})]}function q(e,t,n){var a="#bfdbf2";return e.includes("Sa")||e.includes("So")?{backgroundColor:n?a:"lightgrey",whiteSpace:t?"normal":"nowrap"}:{whiteSpace:t?"normal":"nowrap",backgroundColor:n?a:""}}function G(e){var t=e.value,n=e.delete;e.modify,B();return Object(I.jsx)(O.a,{component:w.a,children:Object(I.jsxs)(g.a,{size:"small","aria-label":"Milestone table",children:[Object(I.jsx)(y.a,{children:Object(I.jsxs)(x.a,{p:0,children:[Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Januar"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Februar"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"M\xe4rz"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"April"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Mai"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Juni"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Juli"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"August"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"September"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Oktober"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"November"}),Object(I.jsx)(m.a,{p:0,style:{width:"8%"},colSpan:2,children:"Dezember"})]})}),Object(I.jsx)(v.a,{p:0,children:t.map((function(e){return Object(I.jsxs)(x.a,{p:0,children:[$(e.Jan,1,U,e.Jan_val,n),$(e.Feb,2,U,e.Feb_val,n),$(e.Mar,3,U,e.Mar_val,n),$(e.Apr,4,U,e.Apr_val,n),$(e.May,5,U,e.May_val,n),$(e.Jun,6,U,e.Jun_val,n),$(e.Jul,7,U,e.Jul_val,n),$(e.Aug,8,U,e.Aug_val,n),$(e.Sep,9,U,e.Sep_val,n),$(e.Oct,10,U,e.Oct_val,n),$(e.Nov,11,U,e.Nov_val,n),$(e.Dec,12,U,e.Dec_val,n)]},e.id)}))})]})})}var Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],X=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).addRow=function(e,t){var n=new Date(e.date);return t[n.getDate()-1][Q[n.getMonth()]+"_val"].push(e),t},a.addMilestones=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];n=t?a.createRows():a.state.rows,e.forEach((function(e,t){n=a.addRow(e,n)})),a.setState({milestones:e,rows:n})},a.addMilestone=function(e,t){console.log("called ........................ und an checkpoint 3: "+t),console.log(e),t&&(a.state.milestones=a.state.milestones.filter((function(t){return t._id!==e._id})),console.log("trying to remove "+e._id)),a.state.milestones.push(e),a.addMilestones(a.state.milestones,!0)},a.deleteMilestone=function(e){console.log("now deleting: "+e+" with pointer: "+a.state.milestones.length);var t=a.state.milestones.filter((function(t){return t._id!=e}));return a.addMilestones(t,!0),new Promise((function(t,n){fetch("".concat(V,"/hero/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){n(e)}))}))};new Date(2021,0,1),new Date(2021,11,31);var l=a.createRows();return a.state={milestones:[],rows:l,currentEntry:{date:null,desc:"test test",desc_long:"long"}},a}return Object(i.a)(n,[{key:"createRows",value:function(){for(var e=[],t=1;t<=31;t++){var n=[];n.push(t);for(var a=0;a<12;a++){var l="";if(t<=new Date(2021,a+1,0).getDate()){var r=new Date(2021,a,t);l=r.toLocaleDateString("de-DE",{day:"numeric"})+" "+r.toLocaleDateString("de-DE",{weekday:"short"})}n.push(l)}e.push({id:n[0],Jan:n[1],Feb:n[2],Mar:n[3],Apr:n[4],May:n[5],Jun:n[6],Jul:n[7],Aug:n[8],Sep:n[9],Oct:n[10],Nov:n[11],Dec:n[12],Jan_val:[],Feb_val:[],Mar_val:[],Apr_val:[],May_val:[],Jun_val:[],Jul_val:[],Aug_val:[],Sep_val:[],Oct_val:[],Nov_val:[],Dec_val:[]})}return e}},{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount success"),j.a.get("/api/data").then((function(t){console.log("data recieved: ",t.data),e.addMilestones(t.data),console.log("changed after load: "+e.state.rows),e.setState({rows:e.state.rows})})).catch(alert)}},{key:"render",value:function(){var e=this;return console.log("render milestones: ",this.state.milestones),Object(I.jsx)(N.a,{theme:P,children:Object(I.jsxs)("div",{children:[Object(I.jsx)(G,{value:this.state.rows,delete:function(t){e.deleteMilestone(t)}}),Object(I.jsx)(K,{obj:function(t,n){e.addMilestone(t,n)},change:function(t){e.changeMilestone(t)}})]})})}}]),n}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(I.jsx)(X,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.20f3b21d.chunk.js.map